# æ—¥æœŸæ—¶é—´é€‰æ‹©å™¨ä½¿ç”¨è¯´æ˜å’Œé—®é¢˜æ’æŸ¥

## é—®é¢˜ç°è±¡

å¦‚æœåœ¨æ´»åŠ¨åˆ›å»ºé¡µé¢çœ‹åˆ°çš„è¿˜æ˜¯çº¯æ–‡æœ¬è¾“å…¥æ¡†ï¼Œè¯·æŒ‰ä»¥ä¸‹æ­¥éª¤æ£€æŸ¥å’Œè§£å†³ã€‚

---

## âœ… è§£å†³æ–¹æ¡ˆ

### æ­¥éª¤ 1ï¼šç¡®è®¤ç»„ä»¶æ–‡ä»¶å®Œæ•´

æ£€æŸ¥ `components/datetime-picker/` ç›®å½•ä¸‹æ˜¯å¦æœ‰ä»¥ä¸‹æ–‡ä»¶ï¼š

```
components/datetime-picker/
â”œâ”€â”€ datetime-picker.wxml  âœ“
â”œâ”€â”€ datetime-picker.wxss  âœ“
â”œâ”€â”€ datetime-picker.js    âœ“
â””â”€â”€ datetime-picker.json  âœ“
```

### æ­¥éª¤ 2ï¼šç¡®è®¤é¡µé¢é…ç½®æ­£ç¡®

æ‰“å¼€ `pages/activities/create.json`ï¼Œç¡®ä¿åŒ…å«ï¼š

```json
{
  "navigationBarTitleText": "åˆ›å»ºæ´»åŠ¨",
  "usingComponents": {
    "datetime-picker": "/components/datetime-picker/datetime-picker"
  }
}
```

### æ­¥éª¤ 3ï¼šé‡æ–°ç¼–è¯‘é¡¹ç›®

åœ¨å¾®ä¿¡å¼€å‘è€…å·¥å…·ä¸­ï¼š

1. ç‚¹å‡»é¡¶éƒ¨èœå• **é¡¹ç›®** â†’ **é‡æ–°ç¼–è¯‘**
2. æˆ–è€…ä½¿ç”¨å¿«æ·é”® `Ctrl + B` (Windows) / `Cmd + B` (Mac)
3. æˆ–è€…ç‚¹å‡»å·¥å…·æ çš„åˆ·æ–°æŒ‰é’® ğŸ”„

### æ­¥éª¤ 4ï¼šæ¸…é™¤ç¼“å­˜

å¦‚æœé‡æ–°ç¼–è¯‘åä»ç„¶ä¸ç”Ÿæ•ˆï¼š

1. ç‚¹å‡»é¡¶éƒ¨èœå• **å·¥å…·** â†’ **æ¸…é™¤ç¼“å­˜** â†’ **æ¸…é™¤å…¨éƒ¨ç¼“å­˜**
2. å…³é—­å¼€å‘è€…å·¥å…·
3. é‡æ–°æ‰“å¼€é¡¹ç›®

### æ­¥éª¤ 5ï¼šæ£€æŸ¥WXMLä»£ç 

æ‰“å¼€ `pages/activities/create.wxml`ï¼Œç¬¬42-87è¡Œåº”è¯¥æ˜¯ï¼š

```xml
<view class="section">
  <view class="card shadow-card form-section">
    <text class="section-title">æ—¶é—´ä¸åœ°ç‚¹</text>

    <!-- å¼€å§‹æ—¶é—´é€‰æ‹©å™¨ -->
    <datetime-picker
      label="æ´»åŠ¨å¼€å§‹æ—¶é—´"
      required="{{true}}"
      dateValue="{{form.startDate}}"
      timeValue="{{form.startTime}}"
      startDate="{{todayDate}}"
      bindchange="onStartTimeChange"
    />

    <!-- ç»“æŸæ—¶é—´é€‰æ‹©å™¨ -->
    <datetime-picker
      label="æ´»åŠ¨ç»“æŸæ—¶é—´"
      required="{{true}}"
      dateValue="{{form.endDate}}"
      timeValue="{{form.endTime}}"
      startDate="{{form.startDate || todayDate}}"
      bindchange="onEndTimeChange"
    />

    <!-- æŠ¥åæˆªæ­¢æ—¶é—´é€‰æ‹©å™¨ -->
    <datetime-picker
      label="æŠ¥åæˆªæ­¢æ—¶é—´"
      dateValue="{{form.registerDeadlineDate}}"
      timeValue="{{form.registerDeadlineTime}}"
      startDate="{{todayDate}}"
      endDate="{{form.startDate}}"
      bindchange="onRegisterDeadlineChange"
    />

    <view class="form-field">
      <text class="field-label">æ´»åŠ¨åœ°ç‚¹ *</text>
      <view class="location-picker" bindtap="chooseLocation">
        <text class="location-icon">ğŸ“</text>
        <text class="{{form.place ? 'location-value' : 'location-placeholder'}}">
          {{form.place || 'ç‚¹å‡»é€‰æ‹©æ´»åŠ¨åœ°ç‚¹'}}
        </text>
      </view>
      <text wx:if="{{form.address}}" class="location-detail">{{form.address}}</text>
    </view>
  </view>
</view>
```

### æ­¥éª¤ 6ï¼šæ£€æŸ¥JSä»£ç 

æ‰“å¼€ `pages/activities/create.js`ï¼Œç¡®è®¤åŒ…å«ä»¥ä¸‹æ–¹æ³•ï¼š

```javascript
// åœ¨ onLoad ä¸­è®¾ç½®ä»Šå¤©çš„æ—¥æœŸ
onLoad(options) {
  const today = new Date();
  const todayDate = formatDateTime(today.toISOString(), 'YYYY-MM-DD');
  this.setData({ todayDate });
  // ... å…¶ä»–ä»£ç 
}

// å¼€å§‹æ—¶é—´æ”¹å˜
onStartTimeChange(e) {
  const { date, time } = e.detail;
  this.setData({
    'form.startDate': date || this.data.form.startDate,
    'form.startTime': time || this.data.form.startTime
  });
  // æ™ºèƒ½è”åŠ¨
  if (this.data.form.endDate && date && this.data.form.endDate < date) {
    this.setData({ 'form.endDate': date });
  }
}

// ç»“æŸæ—¶é—´æ”¹å˜
onEndTimeChange(e) {
  const { date, time } = e.detail;
  this.setData({
    'form.endDate': date || this.data.form.endDate,
    'form.endTime': time || this.data.form.endTime
  });
}

// æŠ¥åæˆªæ­¢æ—¶é—´æ”¹å˜
onRegisterDeadlineChange(e) {
  const { date, time } = e.detail;
  this.setData({
    'form.registerDeadlineDate': date || this.data.form.registerDeadlineDate,
    'form.registerDeadlineTime': time || this.data.form.registerDeadlineTime
  });
}
```

---

## ğŸ¯ æ­£ç¡®çš„æ•ˆæœåº”è¯¥æ˜¯

### è§†è§‰æ•ˆæœ

å½“ä½ æ‰“å¼€æ´»åŠ¨åˆ›å»ºé¡µé¢æ—¶ï¼Œåº”è¯¥çœ‹åˆ°ï¼š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ æ´»åŠ¨å¼€å§‹æ—¶é—´ *                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ ğŸ“… é€‰æ‹©æ—¥æœŸ   â”‚  â”‚ ğŸ• é€‰æ‹©æ—¶é—´  â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ æ´»åŠ¨ç»“æŸæ—¶é—´ *                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ ğŸ“… é€‰æ‹©æ—¥æœŸ   â”‚  â”‚ ğŸ• é€‰æ‹©æ—¶é—´  â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### äº¤äº’æ•ˆæœ

1. **ç‚¹å‡»æ—¥æœŸæ¡†** â†’ å¼¹å‡ºæ—¥å†é€‰æ‹©å™¨ï¼ˆå¾®ä¿¡åŸç”Ÿï¼‰
2. **ç‚¹å‡»æ—¶é—´æ¡†** â†’ å¼¹å‡ºæ—¶é—´æ»šè½®é€‰æ‹©å™¨ï¼ˆå¾®ä¿¡åŸç”Ÿï¼‰
3. **é€‰æ‹©å®Œæˆ** â†’ æ˜¾ç¤ºåœ¨å¯¹åº”çš„æ¡†å†…

**ç»å¯¹ä¸åº”è¯¥å‡ºç°**ï¼š
- âŒ æ–‡æœ¬è¾“å…¥æ¡†
- âŒ é”®ç›˜è¾“å…¥
- âŒ çº¯æ–‡æœ¬placeholder

---

## ğŸ” å¸¸è§é—®é¢˜æ’æŸ¥

### é—®é¢˜1ï¼šçœ‹åˆ°çš„è¿˜æ˜¯inputè¾“å…¥æ¡†

**åŸå› **ï¼šå¯èƒ½æ˜¯ç¼“å­˜æˆ–ç¼–è¯‘é—®é¢˜

**è§£å†³**ï¼š
1. é‡æ–°ç¼–è¯‘é¡¹ç›®
2. æ¸…é™¤ç¼“å­˜
3. å…³é—­å¹¶é‡å¯å¼€å‘å·¥å…·

### é—®é¢˜2ï¼šç‚¹å‡»åæ²¡æœ‰å¼¹å‡ºé€‰æ‹©å™¨

**åŸå› **ï¼šç»„ä»¶æœªæ­£ç¡®æ³¨å†Œæˆ–pickerç»„ä»¶è¢«ç¦ç”¨

**è§£å†³**ï¼š
1. æ£€æŸ¥ `create.json` ä¸­çš„ `usingComponents` é…ç½®
2. ç¡®è®¤ç»„ä»¶è·¯å¾„æ­£ç¡®ï¼š`/components/datetime-picker/datetime-picker`
3. æ£€æŸ¥ WXML ä¸­æ˜¯å¦æœ‰ `disabled="{{true}}"` å±æ€§

### é—®é¢˜3ï¼šé€‰æ‹©åæ•°æ®æ²¡æœ‰æ›´æ–°

**åŸå› **ï¼šäº‹ä»¶å¤„ç†æ–¹æ³•æœªæ­£ç¡®ç»‘å®š

**è§£å†³**ï¼š
1. æ£€æŸ¥ WXML ä¸­çš„ `bindchange` æ˜¯å¦æ­£ç¡®
2. ç¡®è®¤ JS ä¸­æœ‰å¯¹åº”çš„å¤„ç†æ–¹æ³•
3. åœ¨æ§åˆ¶å°æŸ¥çœ‹æ˜¯å¦æœ‰æŠ¥é”™

### é—®é¢˜4ï¼šç»„ä»¶æ˜¾ç¤ºä¸æ­£å¸¸

**åŸå› **ï¼šæ ·å¼æ–‡ä»¶æœªåŠ è½½

**è§£å†³**ï¼š
1. ç¡®è®¤ `datetime-picker.wxss` æ–‡ä»¶å­˜åœ¨
2. é‡æ–°ç¼–è¯‘é¡¹ç›®

---

## ğŸ§ª æµ‹è¯•æ–¹æ³•

### å¿«é€Ÿæµ‹è¯•

åœ¨å¾®ä¿¡å¼€å‘è€…å·¥å…·ä¸­ï¼š

1. æ‰“å¼€ **åˆ›å»ºæ´»åŠ¨** é¡µé¢
2. è§‚å¯Ÿ **æ—¶é—´ä¸åœ°ç‚¹** æ¨¡å—
3. åº”è¯¥çœ‹åˆ°3ä¸ªæ—¥æœŸæ—¶é—´é€‰æ‹©å™¨ï¼š
   - æ´»åŠ¨å¼€å§‹æ—¶é—´ *
   - æ´»åŠ¨ç»“æŸæ—¶é—´ *
   - æŠ¥åæˆªæ­¢æ—¶é—´

4. ç‚¹å‡»æ—¥æœŸæ¡†ï¼ˆğŸ“… å›¾æ ‡ï¼‰
   - åº”è¯¥å¼¹å‡ºæ—¥å†é€‰æ‹©å™¨
   - å¯ä»¥é€šè¿‡ç‚¹é€‰æ—¥æœŸ
   - **ä¸åº”è¯¥å¼¹å‡ºé”®ç›˜**

5. ç‚¹å‡»æ—¶é—´æ¡†ï¼ˆğŸ• å›¾æ ‡ï¼‰
   - åº”è¯¥å¼¹å‡ºæ—¶é—´æ»šè½®
   - å¯ä»¥æ»šåŠ¨é€‰æ‹©æ—¶é—´
   - **ä¸åº”è¯¥å¼¹å‡ºé”®ç›˜**

### æ§åˆ¶å°è°ƒè¯•

åœ¨ `pages/activities/create.js` çš„äº‹ä»¶å¤„ç†æ–¹æ³•ä¸­æ·»åŠ æ—¥å¿—ï¼š

```javascript
onStartTimeChange(e) {
  console.log('å¼€å§‹æ—¶é—´æ”¹å˜:', e.detail);
  const { date, time } = e.detail;
  // ... å…¶ä»–ä»£ç 
}
```

ç„¶ååœ¨æ§åˆ¶å°æŸ¥çœ‹è¾“å‡ºï¼Œç¡®è®¤äº‹ä»¶æ˜¯å¦æ­£ç¡®è§¦å‘ã€‚

---

## ğŸ“± çœŸæœºæµ‹è¯•

å¦‚æœåœ¨å¼€å‘å·¥å…·ä¸­æ­£å¸¸ï¼Œä½†çœŸæœºæœ‰é—®é¢˜ï¼š

1. ç¡®ä¿å¾®ä¿¡ç‰ˆæœ¬ä¸ä½äº **7.0.0**
2. æ¸…é™¤æ‰‹æœºå¾®ä¿¡å°ç¨‹åºç¼“å­˜ï¼š
   - æ‰“å¼€å¾®ä¿¡
   - æˆ‘ â†’ è®¾ç½® â†’ é€šç”¨ â†’ å­˜å‚¨ç©ºé—´
   - æ¸…ç†ç¼“å­˜
3. åˆ é™¤å°ç¨‹åºåé‡æ–°æ‰«ç è¿›å…¥

---

## ğŸ’¡ éªŒè¯ç»„ä»¶æ˜¯å¦å·¥ä½œçš„ç®€å•æ–¹æ³•

åœ¨ `pages/activities/create.wxml` ç¬¬2è¡Œåæ·»åŠ ä¸´æ—¶æµ‹è¯•ä»£ç ï¼š

```xml
<!-- ä¸´æ—¶æµ‹è¯•ä»£ç  - è¯·åœ¨éªŒè¯ååˆ é™¤ -->
<view style="padding: 20rpx; background: #fffacd;">
  <text style="color: #ff0000; font-size: 28rpx;">
    ç»„ä»¶æµ‹è¯•ï¼šä¸‹æ–¹åº”è¯¥çœ‹åˆ°å¯ç‚¹å‡»çš„æ—¥æœŸæ—¶é—´é€‰æ‹©å™¨ï¼Œè€Œä¸æ˜¯è¾“å…¥æ¡†
  </text>
  <datetime-picker
    label="æµ‹è¯•é€‰æ‹©å™¨"
    required="{{true}}"
    dateValue=""
    timeValue=""
    bindchange="onTestChange"
  />
</view>
```

åœ¨ `pages/activities/create.js` ä¸­æ·»åŠ ï¼š

```javascript
onTestChange(e) {
  console.log('æµ‹è¯•é€‰æ‹©å™¨è§¦å‘:', e.detail);
  wx.showToast({
    title: `å·²é€‰æ‹©: ${e.detail.date} ${e.detail.time}`,
    icon: 'none'
  });
}
```

å¦‚æœç‚¹å‡»åï¼š
- âœ… å¼¹å‡ºæ—¥å†/æ—¶é—´é€‰æ‹©å™¨ â†’ ç»„ä»¶å·¥ä½œæ­£å¸¸
- âŒ å¼¹å‡ºé”®ç›˜æˆ–æ— ååº” â†’ ç»„ä»¶æœªæ­£ç¡®åŠ è½½

---

## ğŸ“ ä»ç„¶æ— æ³•è§£å†³ï¼Ÿ

å¦‚æœæŒ‰ç…§ä»¥ä¸Šæ­¥éª¤ä»ç„¶çœ‹åˆ°æ–‡æœ¬è¾“å…¥æ¡†ï¼Œè¯·æä¾›ä»¥ä¸‹ä¿¡æ¯ï¼š

1. å¾®ä¿¡å¼€å‘è€…å·¥å…·ç‰ˆæœ¬å·
2. æ§åˆ¶å°æ˜¯å¦æœ‰æŠ¥é”™ä¿¡æ¯
3. `create.json` æ–‡ä»¶å†…å®¹æˆªå›¾
4. `create.wxml` 42-87è¡Œä»£ç æˆªå›¾
5. é¡µé¢å®é™…æ˜¾ç¤ºæ•ˆæœæˆªå›¾

---

**æœ€åæ›´æ–°**: 2025-10-26
**ç‰ˆæœ¬**: v1.0
