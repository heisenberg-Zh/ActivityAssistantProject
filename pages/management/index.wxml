<!-- pages/management/index.wxml -->
<view class="management-page">
  <!-- 顶部标题栏 -->
  <view class="top-bar top-bar--fixed">
    <view class="top-bar__group">
      <view class="icon-btn" bindtap="goBack">
        <text>←</text>
      </view>
      <text class="text-lg" style="margin-left: 16rpx;">活动管理</text>
    </view>
  </view>

  <!-- 活动信息卡片 -->
  <view class="section" style="margin-top: 100rpx;">
    <view class="card shadow-card p-24">
      <view class="row-between mb-16">
        <text class="title">{{activity.title}}</text>
        <view class="badge {{activity.status === '进行中' ? 'badge--ok' : (activity.status === '即将开始' ? 'badge--info' : 'badge--muted')}}">
          {{activity.status}}
        </view>
      </view>

      <text class="text-sm text-gray-500 mb-16">{{activity.desc}}</text>

      <!-- 管理身份标识 -->
      <view class="role-badge">
        <text class="role-text">{{role === 'creator' ? '创建者' : '管理员'}}</text>
      </view>

      <!-- 统计信息 -->
      <view class="stats-row">
        <view class="stat-item">
          <text class="stat-value">{{totalRegistrations}}</text>
          <text class="stat-label">总报名</text>
        </view>
        <view class="stat-item">
          <text class="stat-value">{{approvedCount}}</text>
          <text class="stat-label">已通过</text>
        </view>
        <view class="stat-item">
          <text class="stat-value">{{pendingCount}}</text>
          <text class="stat-label">待审核</text>
        </view>
        <view class="stat-item">
          <text class="stat-value">{{administrators.length}}</text>
          <text class="stat-label">管理员</text>
        </view>
      </view>
    </view>
  </view>

  <!-- 管理功能菜单 -->
  <view class="section">
    <text class="section-title">管理功能</text>

    <view class="menu-list">
      <block wx:for="{{menuItems}}" wx:key="id">
        <!-- 如果是仅创建者功能且当前用户不是创建者，则不显示 -->
        <view
          wx:if="{{!item.creatorOnly || role === 'creator'}}"
          class="menu-item card shadow-card"
          bindtap="onMenuItemTap"
          data-id="{{item.id}}"
          data-path="{{item.path}}"
          data-creator-only="{{item.creatorOnly}}"
        >
          <view class="menu-icon">{{item.icon}}</view>
          <view class="menu-content">
            <text class="menu-title">{{item.title}}</text>
            <text class="menu-desc">{{item.desc}}</text>
          </view>
          <view class="menu-arrow">→</view>
        </view>
      </block>
    </view>
  </view>

  <view class="bottom-space"></view>
</view>
