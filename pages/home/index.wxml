<!-- pages/home/index.wxml -->
<view class="px-24 py-24">
  <scroll-view scroll-x class="scroll-x" style="padding-bottom: 12rpx;" show-scrollbar="false">
    <block wx:for="{{slides}}" wx:key="id" wx:for-item="item">
      <view class="chip">
        <view class="card home-banner">
          <image class="banner-image" src="{{item.imageUrl}}" mode="aspectFill"></image>
          <view class="banner-overlay"></view>

          <!-- 活动类型标签 - 右上角 -->
          <view class="home-type-badge">
            <text class="home-badge-text">{{item.type}}</text>
          </view>

          <!-- 活动状态标签 - 左上角 -->
          <view class="home-status-badge home-status-badge--{{item.statusClass}}">
            <text class="home-badge-text-white">{{item.status}}</text>
          </view>

          <!-- 活动信息 - 底部 -->
          <view class="home-banner-info">
            <text class="home-banner-title">{{item.title}}</text>
            <view class="home-banner-meta">
              <text class="home-banner-meta-text">{{item.date}}</text>
              <text class="home-banner-meta-text" style="margin-left:16rpx;">{{item.place}}</text>
            </view>
          </view>
        </view>
      </view>
    </block>
  </scroll-view>

  <scroll-view scroll-x class="scroll-x mt-24" style="padding-bottom: 8rpx;" show-scrollbar="false">
    <block wx:for="{{categories}}" wx:key="name" wx:for-item="item">
      <view class="chip">
        <view class="tag {{item.active ? 'tag--active' : ''}}" bindtap="onCategoryTap" data-key="{{item.key}}">{{item.name}}</view>
      </view>
    </block>
  </scroll-view>
</view>

<view class="px-24 quick-actions">
  <view class="quick-grid quick-grid--two">
    <view class="quick-card" bindtap="goCreateActivity">
      <view class="quick-icon quick-icon--blue">
        <view class="quick-icon-plus quick-icon-plus--vertical"></view>
        <view class="quick-icon-plus quick-icon-plus--horizontal"></view>
      </view>
      <text class="quick-title">创建活动</text>
      <text class="quick-desc">快速发起活动</text>
    </view>
    <view class="quick-card" bindtap="goMyActivities">
      <view class="quick-icon quick-icon--green">
        <view class="quick-icon-list">
          <view class="quick-icon-list-bar quick-icon-list-bar--long"></view>
          <view class="quick-icon-list-bar quick-icon-list-bar--medium"></view>
          <view class="quick-icon-list-bar quick-icon-list-bar--long"></view>
        </view>
      </view>
      <text class="quick-title">我的活动</text>
      <text class="quick-desc">管理日程计划</text>
    </view>
  </view>
</view>

<view class="px-24 pb-24">
  <block wx:for="{{list}}" wx:key="id" wx:for-item="item">
    <view class="card mb-24" bindtap="goDetail" data-id="{{item.id}}">
      <view class="banner-container">
        <image class="banner-image" src="{{item.imageUrl}}" mode="aspectFill"></image>
        <view class="banner-overlay"></view>

        <!-- 活动类型标签 - 右上角 -->
        <view class="list-type-badge">
          <text class="list-badge-text">{{item.type}}</text>
        </view>

        <!-- 活动状态标签 - 左上角 -->
        <view class="list-status-badge list-status-badge--{{item.statusClass}}">
          <text class="list-badge-text-white">{{item.status}}</text>
        </view>
      </view>

      <view class="card--pad">
        <text class="text-lg mb-8">{{item.title}}</text>
        <text class="text-sm mb-12">{{item.desc}}</text>
        <view class="row text-sm mb-12">
          <text>{{item.date}}</text>
          <text style="margin-left: 24rpx;">{{item.place}}</text>
        </view>
        <view class="row-between">
          <text class="text-sm">已报 {{item.joined}}/{{item.total}} 人</text>
          <view class="btn {{item.isRegistered ? 'btn--registered' : 'btn--primary'}} btn--small" catchtap="{{item.isRegistered ? 'onRegisteredClick' : 'goRegister'}}" data-id="{{item.id}}">{{item.isRegistered ? '已报名' : '立即报名'}}</view>
        </view>
      </view>
    </view>
  </block>
</view>

<view class="bottom-space"></view>
