<!-- pages/statistics/joined-detail.wxml -->
<view class="container">
  <!-- 核心数据卡片 -->
  <view class="summary-section">
    <view class="summary-grid">
      <view class="summary-item">
        <text class="summary-value">{{totalJoined}}</text>
        <text class="summary-label">参加活动数</text>
      </view>
      <view class="summary-item">
        <text class="summary-value">{{checkedCount}}</text>
        <text class="summary-label">签到次数</text>
      </view>
      <view class="summary-item">
        <text class="summary-value">{{checkinRate}}%</text>
        <text class="summary-label">签到率</text>
      </view>
    </view>
  </view>

  <!-- 活动类型分布 - 饼图 -->
  <view class="chart-section">
    <view class="section-header">
      <text class="section-title">活动类型分布</text>
    </view>
    <view wx:if="{{totalJoined > 0}}" class="chart-container">
      <canvas canvas-id="pie-canvas" id="pie-canvas" style="width: {{canvasWidth}}px; height: {{canvasHeight}}px;"></canvas>
    </view>
    <view wx:else class="empty-state">
      <text class="empty-icon">📊</text>
      <text class="empty-text">暂无活动数据</text>
      <text class="empty-hint">参加活动后即可查看类型分布</text>
    </view>
  </view>

  <!-- 每月参加活动趋势 - 柱状图 -->
  <view class="chart-section">
    <view class="section-header">
      <text class="section-title">每月参加活动趋势</text>
      <text wx:if="{{totalJoined > 0 && totalJoined < 5}}" class="section-hint">继续参与更多活动，数据会更精彩</text>
    </view>
    <view wx:if="{{totalJoined > 0}}" class="chart-container">
      <canvas canvas-id="bar-canvas" id="bar-canvas" style="width: {{canvasWidth}}px; height: {{canvasHeight}}px;"></canvas>
    </view>
    <view wx:else class="empty-state">
      <text class="empty-icon">📈</text>
      <text class="empty-text">暂无趋势数据</text>
      <text class="empty-hint">多参加活动，查看你的活跃趋势</text>
      <navigator url="/pages/activities/list" class="empty-action">去看看有什么活动</navigator>
    </view>
  </view>

  <view class="bottom-space"></view>
</view>
