<!-- pages/favorites/index.wxml -->

<!-- æ¸¸å®¢çŠ¶æ€æç¤º -->
<view wx:if="{{!isLoggedIn}}" class="guest-container">
  <view class="guest-content">
    <view class="guest-icon">â­</view>
    <text class="guest-title">æˆ‘çš„æ”¶è—</text>
    <text class="guest-desc">ç™»å½•åæ”¶è—æ‚¨å–œæ¬¢çš„æ´»åŠ¨</text>
    <view class="guest-features">
      <view class="guest-feature-item">
        <text class="guest-feature-icon">ğŸ’–</text>
        <text class="guest-feature-text">æ”¶è—æ„Ÿå…´è¶£çš„æ´»åŠ¨</text>
      </view>
      <view class="guest-feature-item">
        <text class="guest-feature-icon">ğŸ”–</text>
        <text class="guest-feature-text">å¿«é€Ÿè®¿é—®æ”¶è—åˆ—è¡¨</text>
      </view>
      <view class="guest-feature-item">
        <text class="guest-feature-icon">ğŸ”„</text>
        <text class="guest-feature-text">è·¨è®¾å¤‡åŒæ­¥æ”¶è—</text>
      </view>
    </view>
    <view class="guest-login-btn" bindtap="goLogin">
      <text class="guest-login-icon">ğŸ”</text>
      <text class="guest-login-text">ç«‹å³ç™»å½•</text>
    </view>
  </view>
</view>

<!-- å·²ç™»å½•çŠ¶æ€ -->
<view wx:else class="page-container">
  <!-- ç©ºçŠ¶æ€ -->
  <view wx:if="{{favoriteActivities.length === 0}}" class="empty-state">
    <text class="empty-icon">â­</text>
    <text class="empty-title">æš‚æ— æ”¶è—æ´»åŠ¨</text>
    <text class="empty-hint">å¿«å»å‘ç°æœ‰è¶£çš„æ´»åŠ¨å§ï½</text>
    <navigator url="/pages/activities/list" open-type="switchTab" class="btn btn--primary empty-btn">æµè§ˆæ´»åŠ¨</navigator>
  </view>

  <!-- æ”¶è—æ´»åŠ¨åˆ—è¡¨ -->
  <view wx:else class="content-section">
    <view class="section-header">
      <text class="section-title">å…±æ”¶è— {{favoriteActivities.length}} ä¸ªæ´»åŠ¨</text>
    </view>

    <block wx:for="{{favoriteActivities}}" wx:key="id" wx:for-item="item">
      <view class="card shadow-card activity-card">
        <view class="row-between activity-card__header">
          <view class="row gap-12">
            <view class="badge {{ item.status === 'è¿›è¡Œä¸­' ? 'badge--ok' : (item.status === 'å³å°†å¼€å§‹' ? 'badge--info' : 'badge--muted') }}">{{item.status}}</view>
            <view wx:if="{{item.privacyTag}}" class="badge badge--warning">ğŸ”’ {{item.privacyTag}}</view>
          </view>
          <view class="badge badge--light">{{item.type}}</view>
        </view>
        <view class="activity-card__body">
          <text class="text-lg text-gray-800 mb-8">{{item.title}}</text>
          <text class="text-sm text-gray-500 mb-12">{{item.desc}}</text>
          <view class="row text-sm text-gray-500 mb-8">
            <text>æ—¶é—´ï¼š{{item.timeRange}}</text>
          </view>
          <view class="row text-sm text-gray-500 mb-12">
            <text>åœ°ç‚¹ï¼š{{item.place}}</text>
          </view>
          <view class="row-between mb-12">
            <text class="text-sm text-gray-600">å·²æŠ¥ {{item.joined}} / {{item.total}}</text>
            <view class="row gap-12">
              <view class="btn btn--danger btn--small" catchtap="removeFavorite" data-id="{{item.id}}">å–æ¶ˆæ”¶è—</view>
              <view class="btn btn--secondary btn--small" catchtap="goDetail" data-id="{{item.id}}">æŸ¥çœ‹è¯¦æƒ…</view>
            </view>
          </view>
        </view>
      </view>
    </block>
  </view>

  <view class="bottom-space"></view>
</view>
