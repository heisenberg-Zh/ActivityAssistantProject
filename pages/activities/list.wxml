<!-- pages/activities/list.wxml -->
<view class="page-container">
  <view class="header-section">
    <view class="search-section">
      <view class="search-box">
        <text class="search-icon">搜</text>
        <input class="search-input" placeholder="搜索活动名称或地点" bindinput="onSearchInput" value="{{keyword}}" />
      </view>
    </view>

    <view class="filter-section">
      <scroll-view scroll-x class="filter-scroll-view" show-scrollbar="false">
        <view class="filter-tabs">
          <block wx:for="{{filters}}" wx:key="key" wx:for-item="item">
            <view class="filter-tab {{item.active ? 'filter-tab--active' : ''}}" bindtap="onFilterTap" data-key="{{item.key}}">
              {{item.name}}
            </view>
          </block>
        </view>
      </scroll-view>
    </view>
  </view>

  <view class="content-section">
    <block wx:for="{{filtered}}" wx:key="id" wx:for-item="item">
      <view class="card shadow-card activity-card">
        <view class="row-between activity-card__header">
          <view class="row gap-12">
            <view class="badge {{ item.status === '进行中' ? 'badge--ok' : (item.status === '即将开始' ? 'badge--info' : 'badge--muted') }}">{{item.status}}</view>
          </view>
          <view class="badge badge--light">{{item.type}}</view>
        </view>
        <view class="activity-card__body">
          <text class="text-lg text-gray-800 mb-8">{{item.title}}</text>
          <text class="text-sm text-gray-500 mb-12">{{item.desc}}</text>
          <view class="row text-sm text-gray-500 mb-8">
            <text>时间：{{item.timeRange}}</text>
          </view>
          <view class="row text-sm text-gray-500 mb-12">
            <text>地点：{{item.place}}</text>
          </view>
          <view class="row-between mb-12">
            <text class="text-sm text-gray-600">已报 {{item.joined}} / {{item.total}}</text>
            <view class="row gap-12">
              <view class="btn {{item.isRegistered ? 'btn--registered' : 'btn--primary'}} btn--small" catchtap="{{item.isRegistered ? 'onRegisteredClick' : 'goRegister'}}" data-id="{{item.id}}">{{item.isRegistered ? '已报名' : '立即报名'}}</view>
              <view class="btn btn--secondary btn--small" catchtap="goDetail" data-id="{{item.id}}">查看详情</view>
            </view>
          </view>
        </view>
      </view>
    </block>
  </view>

  <view class="bottom-space"></view>
</view>
