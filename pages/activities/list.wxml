<!-- pages/activities/list.wxml -->
<view class="page-container">
  <view class="header-section">
    <view class="search-section">
      <view class="search-box">
        <text class="search-icon">æœ</text>
        <input class="search-input" placeholder="æœç´¢æ´»åŠ¨åç§°æˆ–åœ°ç‚¹" bindinput="onSearchInput" value="{{keyword}}" />
      </view>
    </view>

    <view class="filter-section">
      <scroll-view scroll-x class="filter-scroll-view" show-scrollbar="false">
        <view class="filter-tabs">
          <block wx:for="{{filters}}" wx:key="key" wx:for-item="item">
            <view class="filter-tab {{item.active ? 'filter-tab--active' : ''}}" bindtap="onFilterTap" data-key="{{item.key}}">
              {{item.name}}
            </view>
          </block>
        </view>
      </scroll-view>
    </view>
  </view>

  <view class="content-section">
    <block wx:for="{{filtered}}" wx:key="id" wx:for-item="item">
      <view class="card shadow-card activity-card">
        <view class="row-between activity-card__header">
          <view class="row gap-12">
            <view class="badge {{ item.status === 'è¿›è¡Œä¸­' ? 'badge--ok' : (item.status === 'å³å°†å¼€å§‹' ? 'badge--info' : 'badge--muted') }}">{{item.status}}</view>
            <view wx:if="{{item.privacyTag}}" class="badge badge--warning">ğŸ”’ {{item.privacyTag}}</view>
          </view>
          <view class="badge badge--light">{{item.type}}</view>
        </view>
        <view class="activity-card__body">
          <text class="text-lg text-gray-800 mb-8">{{item.title}}</text>
          <text class="text-sm text-gray-500 mb-12">{{item.desc}}</text>
          <view class="row text-sm text-gray-500 mb-8">
            <text>æ—¶é—´ï¼š{{item.timeRange}}</text>
          </view>
          <view class="row text-sm text-gray-500 mb-12">
            <text>åœ°ç‚¹ï¼š{{item.place}}</text>
          </view>
          <view class="row-between mb-12">
            <text class="text-sm text-gray-600">å·²æŠ¥ {{item.joined}} / {{item.total}}</text>
            <view class="row gap-12">
              <view class="btn {{item.isRegistered ? 'btn--registered' : 'btn--primary'}} btn--small" catchtap="{{item.isRegistered ? 'onRegisteredClick' : 'goRegister'}}" data-id="{{item.id}}">{{item.isRegistered ? 'å·²æŠ¥å' : 'ç«‹å³æŠ¥å'}}</view>
              <view class="btn btn--secondary btn--small" catchtap="goDetail" data-id="{{item.id}}">æŸ¥çœ‹è¯¦æƒ…</view>
            </view>
          </view>
        </view>
      </view>
    </block>
  </view>

  <view class="bottom-space"></view>
</view>
